---
sidebar: sidebar 
permalink: task-scanning-file-shares.html 
keywords: cloud compliance, enable cloud compliance, privacy, compliance, file shares, nfs, cifs, smb, data sense, 7-mode 
summary: ネットアップ以外のNFSまたはCIFSファイル共有のスキャンをBlueXPで直接開始するには、いくつかの手順を実行します。これらのファイル共有は、オンプレミスでもクラウドでもかまいません。 
---
= BlueXP  分類によるファイル共有のスキャン
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ファイル共有をスキャンするには、まずBlueXP classificationでファイル共有グループを作成する必要があります。ファイル共有グループは、オンプレミスまたはクラウドでホストされているNFSまたはCIFS（SMB）共有用です。


NOTE: ネットアップ以外のファイル共有からのデータのスキャンは、BlueXP分類コアバージョンではサポートされていません。



== 前提条件

BlueXPの分類を有効にする前に、次の前提条件を確認して、サポートされる構成があることを確認してください。

* 共有は、クラウド内やオンプレミスなど、どこでもホストできます。古いNetApp 7-ModeストレージシステムのCIFS共有は、ファイル共有としてスキャンできます。
+
** BlueXP classificationでは、7-Mode システムから権限や「最終アクセス時刻」を抽出できません。
** 一部の Linux バージョンと 7-Mode システム上の CIFS 共有の間に既知の問題があるため、NTLM 認証が有効になっている SMBv1 のみを使用するように共有を構成する必要があります。


* BlueXP分類インスタンスと共有の間にネットワーク接続が必要です。
* DFS（Distributed File System）共有を通常のCIFS共有として追加できます。BlueXP classificationでは、共有が複数のサーバー/ボリューム上に構築され、単一の CIFS 共有として結合されていることを認識しないため、メッセージが実際には別のサーバー/ボリュームにあるフォルダー/共有の 1 つにのみ適用される場合でも、共有に関するアクセス許可または接続エラーが発生する可能性があります。
* CIFS （ SMB ）共有の場合は、共有への読み取りアクセスを提供する Active Directory クレデンシャルがあることを確認します。BlueXPの分類で昇格された権限が必要なデータをスキャンする必要がある場合に備えて、管理者クレデンシャルが推奨されます。
+
BlueXP classificationスキャンによってファイルの「最終アクセス時刻」が変更されないようにしたい場合は、ユーザーに CIFS の属性書き込み権限または NFS の書き込み権限を与えることをお勧めします。可能であれば、Active Directory ユーザーを、すべてのファイルへの権限を持つ組織内の親グループの一部として構成します。

* グループ内のすべての CIFS ファイル共有では、同じ Active Directory 資格情報を使用する必要があります。
* NFSとCIFS（KerberosまたはNTLMを使用）の共有を混在させることができます。共有はグループに個別に追加する必要があります。つまり、プロトコルごとに1回ずつ、合計2回プロセスを実行する必要があります。
+
** CIFS 認証タイプ (Kerberos と NTLM) が混在するファイル共有グループを作成することはできません。


* Kerberos認証でCIFSを使用している場合は、指定されたIPアドレスがBlueXP classificationサービスにアクセスできることを確認してください。IPアドレスにアクセスできない場合は、ファイル共有を追加できません。




== ファイル共有グループを作成する

グループにファイル共有を追加する場合は、次の形式を使用する必要があります。  `<host_name>:/<share_path>` 。

+ ファイル共有を個別に追加することも、スキャンするファイル共有の行区切りリストを入力することもできます。一度に最大 100 個の共有を追加できます。

.手順
. BlueXP  分類メニューから*設定*を選択します。
. [Configuration]ページで、*[Add Working Environment]*>*[Add File Shares Group]*を選択します。
. [ファイル共有グループの追加] ダイアログで、共有グループの名前を入力し、[続行] を選択します。
. 追加するファイル共有のプロトコルを選択します。
+
image:screen-cl-config-shares-add.png["プロトコルと共有を選択するオプションが表示されている共有を追加するモーダルのスクリーンショット"]



.NTLM認証を使用してCIFS共有を追加する場合は、CIFSボリュームにアクセスするためのActive Directory認証情報を入力してください。読み取り専用の認証情報もサポートされていますが、管理者の認証情報を使用してフルアクセスを付与することをお勧めします。**保存**を選択します。
. スキャンするファイル共有を追加します（1行に1つのファイル共有）。次に、[**続行**] を選択します。
. 追加された共有の数が確認ダイアログに表示されます。
+
ダイアログに追加できなかった共有が表示された場合は、問題を解決できるようにこの情報を記録しておきます。問題が命名規則に関係する場合は、修正した名前で共有を再度追加できます。

. ボリュームのスキャンを構成します。
+
** ファイル共有でマッピングのみのスキャンを有効にするには、* Map *を選択します。
** ファイル共有でフルスキャンを有効にするには、* Map & Classify *を選択します。
** ファイル共有でのスキャンを無効にするには、*オフ*を選択します。
+

NOTE: 「属性の書き込み」権限がない場合にスキャンする*のページ上部のスイッチは、デフォルトでは無効になっています。つまり、 BlueXP classificationにCIFSの書き込み属性権限またはNFSの書き込み権限がない場合、 BlueXP classificationは「最終アクセス時刻」を元のタイムスタンプに戻すことができないため、システムはファイルをスキャンしません。+ *「書き込み属性」権限がない場合にスキャン*を*オン*に切り替えると、スキャンは最終アクセス時刻をリセットし、権限に関係なくすべてのファイルをスキャンします。+ 最終アクセス時刻の詳細については、以下を参照してください。 link:link:reference-collected-metadata.html#last-access-time-timestamp["BlueXP  分類でデータソースから収集されるメタデータ"] 。





.結果
BlueXP classificationは、追加したファイル共有内のファイルのスキャンを開始します。 xref:#track-the-scanning-progress[スキャンの進行状況を追跡する] **ダッシュボード**でスキャンの結果を表示します。


NOTE: Kerberos 認証を使用した CIFS 構成のスキャンが正常に完了しない場合は、[**構成**] タブでエラーを確認してください。



== ファイル共有グループを編集する

ファイル共有グループを作成した後、CIFS プロトコルを編集したり、ファイル共有を追加および削除したりできます。

.CIFSプロトコル設定を編集する
. BlueXP  分類メニューから*設定*を選択します。
. [構成] ページで、変更するファイル共有グループを選択します。
. **CIFS 資格情報の編集** を選択します。
+
image:screenshot-edit-cifs-credential.png["CIFS 資格情報の編集メニューのスクリーンショット。"]

. 認証方法を選択します: **NTLM** または **Kerberos**。
. Active Directory の **ユーザー名** と **パスワード** を入力します。
. プロセスを完了するには、[**保存**] を選択します。


.コンプライアンススキャンにファイル共有を追加する
. BlueXP  分類メニューから*設定*を選択します。
. [構成] ページで、変更するファイル共有グループを選択します。
. **+ 共有を追加** を選択します。
. 追加するファイル共有のプロトコルを選択します。
+
image:screen-cl-config-shares-add.png["プロトコルと共有を選択するオプションが表示されている共有を追加するモーダルのスクリーンショット"]

+
すでに構成済みのプロトコルにファイル共有を追加する場合、変更は必要ありません。

+
2番目のプロトコルでファイル共有を追加する場合は、認証が適切に設定されていることを確認してください。 link:#prerequisites["前提条件"] 。

. スキャンするファイル共有（1行につき1つのファイル共有）を次の形式で追加します。  `<host_name>:/<share_path>` 。
. ファイル共有の追加を完了するには、[**続行**] を選択します。


.コンプライアンススキャンからファイル共有を削除する
. BlueXP  分類メニューから*設定*を選択します。
. ファイル共有を削除する作業環境を選択します。
. 「 * Configuration * 」を選択します。
. [Configuration]ページで、削除するファイル共有の[Actions]を選択しimage:button-actions-horizontal.png["アクションアイコン"]ます。
. [操作]メニューから*[共有の削除]*を選択します。




== スキャンの進行状況を追跡する

初期スキャンの進行状況を追跡できます。

. **構成** メニューを選択します。
. **作業環境構成**を選択します。
+
各スキャンの進行状況が進行状況バーとして表示されます。

. 進行状況バーにカーソルを合わせると、ボリューム内の合計ファイル数に対してスキャンされたファイル数が表示されます。

