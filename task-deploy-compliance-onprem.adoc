---
sidebar: sidebar 
permalink: task-deploy-compliance-onprem.html 
keywords: cloud compliance, data sense, get started, deploy cloud data sense, outbound internet, endpoints, cloud compliance internet, web browser connectivity, cloud compliance access, privacy, compliance, on-premises 
summary: ネットワーク内またはクラウド内でインターネットにアクセスできる Linux ホストに Cloud Data Sense を導入するには、いくつかの手順を実行します。 
---
= インターネットにアクセス可能な Linux ホストに Cloud Data Sense を導入する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ネットワーク内またはクラウド内でインターネットにアクセスできる Linux ホストに Cloud Data Sense を導入するには、いくつかの手順を実行します。

オンプレミスにあるデータセンスインスタンスを使用してオンプレミスの ONTAP システムをスキャンする場合は、オンプレミスインストールを選択することをお勧めします。ただしこれは必須ではありません。どのインストール方法を選択しても、ソフトウェアはまったく同じように機能します。

ペタバイト規模のデータをスキャンする大規模な構成では、複数のホストを含めて処理能力を追加できます。複数のホストシステムを使用する場合、プライマリシステムはManagerノードと呼ばれ、処理能力を向上させる追加システムはスキャナノードと呼ばれます。

また、次のことも可能です link:task-deploy-compliance-dark-site.html["インターネットにアクセスできないオンプレミスサイトにデータセンスを導入する"] 完全にセキュアなサイトに。



== クイックスタート

これらの手順を実行すると、すぐに作業を開始できます。また、残りのセクションまでスクロールして詳細を確認することもできます。

[role="quick-margin-para"]
コネクタがない場合は、ここでコネクタを作成します。を参照してください https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-creating-connectors-aws.html["AWS でコネクタを作成する"^]、 https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-creating-connectors-azure.html["Azure でコネクタを作成する"^]または https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-creating-connectors-gcp.html["GCP でコネクタを作成する"^]。

[role="quick-margin-para"]
また可能です https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-installing-linux.html["コネクタをオンプレミスに導入"^] 自社ネットワーク内またはクラウド内の Linux ホスト

[role="quick-margin-para"]
環境が前提条件を満たしていることを確認します。これには、インスタンスのアウトバウンドインターネットアクセス、ポート 443 を介したコネクタとクラウドデータセンスの接続などが含まれます。  BlueXP and Data Sense prerequisites,すべてのリストを参照してください。

[role="quick-margin-para"]
とを満たす Linux システムも必要です  the Linux host system,次の要件があります。

[role="quick-margin-para"]
ネットアップサポートサイトから Cloud Data Sense ソフトウェアをダウンロードし、使用する Linux ホストにインストーラファイルをコピーします。次に、インストールウィザードを起動し、プロンプトに従って Data Sense インスタンスを展開します。

[role="quick-margin-para"]
Cloud Data SenseがBlueXPでスキャンする最初の1 TBのデータは無料です。そのあともデータのスキャンを続行するには、クラウドプロバイダ Marketplace またはネットアップの BYOL ライセンスのサブスクリプションが必要です。



== コネクタを作成します

コネクタがない場合は、クラウドプロバイダでコネクタを作成します。を参照してください https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-creating-connectors-aws.html["AWS でコネクタを作成する"^] または https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-creating-connectors-azure.html["Azure でコネクタを作成する"^]または https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-creating-connectors-gcp.html["GCP でコネクタを作成する"^]。ほとんどの場合、 Cloud Data Sense を有効にする前にコネクタをセットアップしておくことができます https://docs.netapp.com/us-en/cloud-manager-setup-admin/concept-connectors.html#when-a-connector-is-required["BlueXPの機能にはコネクタが必要です"]ただし、ここで設定する必要がある場合もあります。

特定のクラウドプロバイダに導入されているコネクタを使用する必要がある場合は、次のような状況があります。

* AWS 、 Amazon FSX for ONTAP 、または AWS S3 バケット内の Cloud Volumes ONTAP のデータをスキャンするときは、 AWS のコネクタを使用します。
* Azure または Azure NetApp Files で Cloud Volumes ONTAP 内のデータをスキャンする場合は、 Azure のコネクタを使用します。
+
** Azure NetApp Files の場合は、スキャンするボリュームと同じ領域に配置する必要があります。


* GCP の Cloud Volumes ONTAP でデータをスキャンする場合は、 GCP のコネクタを使用します。


オンプレミスのONTAP システムでは、ネットアップ以外のファイル共有、汎用のS3オブジェクトストレージ、データベース、OneDriveフォルダ、SharePointアカウント、Googleドライブアカウントを、これらのクラウドコネクタのいずれかを使用してスキャンできます。

また、次のことも可能です https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-installing-linux.html["コネクタをオンプレミスに導入"^] 自社ネットワーク内またはクラウド内の Linux ホストデータセンスをオンプレミスにインストールする予定のユーザによっては、 Connector をオンプレミスにインストールすることもできます。

ご覧のように、を使用する必要がある状況もあります https://docs.netapp.com/us-en/cloud-manager-setup-admin/concept-connectors.html#when-to-use-multiple-connectors["複数のコネクタ"]。

データセンスをインストールするときは、コネクタシステムのIPアドレスまたはホスト名が必要です。この情報は、コネクタをオンプレミスにインストールした場合に表示されます。コネクタがクラウドに導入されている場合は、BlueXPコンソールで[ヘルプ]アイコンをクリックし、[*サポート]を選択して、[* BlueXPコネクタ*]をクリックします。



== Linux ホストシステムを準備

データセンスソフトウェアは、特定のオペレーティングシステム要件、 RAM 要件、ソフトウェア要件などを満たすホストで実行する必要があります。データセンスは、他のアプリケーションと共有されるホストではサポートされません。ホストは専用のホストである必要があります。

* オペレーティングシステム：Red Hat Enterprise LinuxまたはCentOSのバージョン8.0~8.6
+
** バージョン7.8または7.9を使用できますが、Linuxカーネルバージョンは4.0以降である必要があります
** OS が Docker エンジンをインストールできる必要があります（必要に応じて、 _firewalld_service を無効にするなど）。


* Disk ： 500GiB の SSD を / 、またはで使用できます
+
** 100 GiB は /opt で利用できます
** /var で 400GiB の可用性を確保
** /tmp 上で 5 GiB


* RAM ： 64GB （ホストでスワップメモリを無効にする必要があります）
* CPU ： 16 コア
+
CPU 数と RAM 容量が少ないシステムには Data Sense を導入できますが、これらのシステムの使用には制限があります。を参照してください link:concept-cloud-compliance.html#using-a-smaller-instance-type["小さいインスタンスタイプを使用しています"] を参照してください。

* Red Hat Enterprise Linux システムは、 Red Hat サブスクリプション管理に登録する必要があります。登録されていないと、インストール時に必要なサードパーティ製ソフトウェアを更新するためのリポジトリにアクセスできません。
* 次のソフトウェアがホストにインストールされている必要があります。ホストにソフトウェアがまだ存在しない場合は、インストーラによってソフトウェアがインストールされます。
+
** Docker Engine バージョン 19 以降。 https://docs.docker.com/engine/install/["インストール手順を確認します"^]。
** Python 3 バージョン 3.6 以降。 https://www.python.org/downloads/["インストール手順を確認します"^]。





NOTE: Data Senseホスト・システムのIPアドレスは、インストール後は変更できません。



== BlueXPおよびData Senseの前提条件を確認します

Linux システムに Cloud Data Sense を導入する前に、次の前提条件を確認し、サポートされている構成であることを確認してください。

Cloud Data Sense からのアウトバウンドインターネットアクセスを有効にする:: Cloud Data Sense では、アウトバウンドのインターネットアクセスが必要。仮想ネットワークまたは物理ネットワークでインターネットアクセスにプロキシサーバを使用している場合は、 Data sense インスタンスにアウトバウンドのインターネットアクセスがあり、次のエンドポイントに接続できることを確認します。
+
--
[cols="43,57"]
|===
| エンドポイント | 目的 


| \ https://cloudmanager.cloud.netapp.com | ネットアップアカウントを含むBlueXPサービスとの通信 


| ¥ https://netapp-cloud-account.auth0.com ¥ https://auth0.com | BlueXP Webサイトとの通信により、ユーザ認証を一元化。 


| https://support.compliance.cloudmanager.cloud.netapp.com/ \ https://hub.docker.com \ https://auth.docker.io \ https://registry-1.docker.io \ https://index.docker.io/ \ https://dseasb33srnrn.cloudfront.net/ \ https://production.cloudflare.docker.com/ | ソフトウェアイメージ、マニフェスト、テンプレートへのアクセス、およびログとメトリックの送信を提供します。 


| \ https://support.compliance.cloudmanager.cloud.netapp.com/ | ネットアップが監査レコードからデータをストリーミングできるようにします。 


| ¥ https://github.com/docker ¥ https://download.docker.com ¥ http://mirror.centos.org ¥ http://mirrorlist.centos.org ¥ http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-2.107-3.el7.noarch.rpm | インストールの前提条件パッケージを提供します。 
|===
--
BlueXPに必要な権限があることを確認します:: BlueXPに、クラウドデータセンスインスタンスのリソースを展開し、セキュリティグループを作成する権限があることを確認します。BlueXPの最新の権限は、で確認できます https://docs.netapp.com/us-en/cloud-manager-setup-admin/reference-permissions.html["ネットアップが提供するポリシー"^]。
BlueXPコネクタがCloud Data Senseにアクセスできることを確認します:: コネクタと Cloud Data Sense インスタンス間の接続を確認します。コネクタのセキュリティグループは、 Data Sense インスタンスとの間でポート 443 経由のインバウンドおよびアウトバウンドトラフィックを許可する必要があります。
+
--
この接続により、データセンスインスタンスの展開が可能になり、 [ コンプライアンス（ Compliance ） ] タブと [ ガバナンス（ Governance ） ] タブで情報を表示できます。

ポート8080が開いていることを確認し、BlueXPでインストールの進行状況を確認します。

--
クラウドデータを常に運用しておく必要があります:: データを継続的にスキャンするには、 Cloud Data Sense インスタンスがオンのままになっている必要があります。
Web ブラウザから Cloud Data Sense への接続を確認する:: Cloud Data Senseを有効にしたら、ユーザーがData Senseインスタンスに接続しているホストからBlueXPインターフェイスにアクセスすることを確認します。
+
--
データセンスインスタンスは、プライベート IP アドレスを使用して、インデックス付きデータがインターネットにアクセスできないようにします。そのため、BlueXPへのアクセスに使用するWebブラウザには、そのプライベートIPアドレスへの接続が必要です。この接続は、クラウドプロバイダ（ VPN など）への直接接続、またはデータセンスインスタンスと同じネットワーク内にあるホストから行うことができます。

--




== オンプレミスにデータセンスを導入

一般的な構成では、ソフトウェアを 1 台のホストシステムにインストールします。  installation for typical configurations,これらの手順を参照してください。

image:diagram_deploy_onprem_single_host_internet.png["インターネットにアクセスできるオンプレミスに導入された単一のデータセンスインスタンスを使用してスキャンできるデータソースの場所を示す図。"]

ペタバイト規模のデータをスキャンする大規模な構成では、複数のホストを含めて処理能力を追加できます。  installation for large configurations,これらの手順を参照してください。

image:diagram_deploy_onprem_multi_host_internet.png["インターネットにアクセスできるオンプレミスに導入された複数のData Senseインスタンスを使用する場合に、スキャンできるデータソースの場所を示す図。"]

を参照してください  the Linux host system,Linux ホストシステムの準備 および  BlueXP and Data Sense prerequisites,前提条件の確認 Cloud Data Sense を導入する前に、要件の一覧を確認してください。

Data Sense ソフトウェアへのアップグレードは、インスタンスがインターネットに接続されている限り自動化されます。


NOTE: Cloud Data Sense は、ソフトウェアがオンプレミスにインストールされている場合、現在 S3 バケット、 Azure NetApp Files 、または FSX for ONTAP をスキャンできない。このような場合は、クラウドとに別のコネクタとデータセンスのインスタンスを導入する必要があります https://docs.netapp.com/us-en/cloud-manager-setup-admin/concept-connectors.html#when-to-switch-between-connectors["コネクタを切り替えます"^] データソースごとに異なる。



=== 一般的な構成でのシングルホストインストール

単一のオンプレミスホストに Data Sense ソフトウェアをインストールする場合は、次の手順を実行します。

.必要なもの
* Linux システムがを満たしていることを確認します  the Linux host system,ホストの要件。
* （オプション）システムに、前提条件となる 2 つのソフトウェアパッケージ（ Docker Engine と Python 3 ）がインストールされていることを確認します。このソフトウェアがシステムにインストールされていない場合は、インストーラによってインストールされます。
* Linux システムに対する root 権限があることを確認してください。
* プロキシを使用していて、 TLS 代行受信を実行している場合は、 TLS CA 証明書が保存されている Data Sense Linux システム上のパスを確認する必要があります。
* オフライン環境が要件を満たしていることを確認します  BlueXP and Data Sense prerequisites,権限と接続。


.手順
. から Cloud Data Sense ソフトウェアをダウンロードします https://mysupport.netapp.com/site/products/all/details/cloud-data-sense/downloads-tab/["ネットアップサポートサイト"^]。選択するファイルの名前は* DATASENSE-installer -<version> .tar.gz *です。
. 使用する Linux ホストにインストーラファイルをコピーします (`cp またはその他の方法を使用 ) 。
. BlueXPでは、* Governance > Classification *を選択します。
. [ データセンスを活動化（ Activate Data sense ） ] をクリックし
+
image:screenshot_cloud_compliance_deploy_start.png["Cloud Data Sense を有効にするボタンを選択するスクリーンショット。"]

. Activate Data Sense * をクリックして、オンプレミス導入ウィザードを開始します。
+
image:screenshot_cloud_compliance_deploy_onprem.png["クラウドデータセンスをオンプレミスに導入するボタンを選択するスクリーンショット。"]

. _Deploy Data Sense on Premises _ Dialog で、提供されたコマンドをコピーしてテキストファイルに貼り付け、後で使用できるようにして、 * Close * をクリックします。例：
+
「 sudo ./install.sh -a 12345 -c 27AG75 -t 2198qq 」と入力します

. ホストマシンでインストーラファイルを解凍します。次に例を示します。
+
[source, cli]
----
tar -xzf DATASENSE-INSTALLER-V1.16.1.tar.gz
----
. インストーラからプロンプトが表示されたら、一連のプロンプトに必要な値を入力するか、インストーラに必要なパラメータをコマンドライン引数として指定することができます。
+
インストールを正常に完了するには、インストーラによって事前チェックが実行され、システムとネットワークの要件が満たされていることが確認されます。

+
[cols="50a,50"]
|===
| プロンプトに従ってパラメータを入力します。 | 完全なコマンドを入力します。 


 a| 
.. 手順 6 からコピーした情報を貼り付けます。 'UDO./install.sh -a <account_id>-c <agent_id>-t<token>`
.. コネクタインスタンスからアクセスできるように、 Data Sense ホストマシンの IP アドレスまたはホスト名を入力します。
.. BlueXP ConnectorホストマシンのIPアドレスまたはホスト名を入力して、データセンスインスタンスからアクセスできるようにします。
.. プロンプトが表示されたら、プロキシの詳細を入力BlueXPコネクタが既にプロキシを使用している場合は、この情報を再度入力する必要はありません。これは、コネクタが使用するプロキシが自動的に使用されるためです。

| また、必要なホストパラメータとプロキシパラメータを指定して、コマンド全体を事前に作成することもできます。 sudo ./install.sh -a <account_id > -c <agent_id> -t <token> -host <ds_host> --proxy-host <cm_host> --proxy-host <proxy_host> -proxy-port <proxy-dir password> -proxy-password-dir <proxy-password> 
|===
+
変数値：

+
** _account_id _ = ネットアップアカウント ID
** _agent_id _ = コネクタ ID
** _ctoken _ = JWT ユーザートークン
** _ds_host_ = Data Sense Linux システムの IP アドレスまたはホスト名
** _cm_host_= BlueXPコネクタシステムのIPアドレスまたはホスト名。
** _proxy_host_ = ホストがプロキシサーバの背後にある場合は、プロキシサーバの IP 名またはホスト名。
** _proxy_port_= プロキシサーバに接続するポート（デフォルトは 80 ）です。
** _proxy_scheme_= 接続方式： https または http （デフォルト http ）。
** _proxy_user_= ベーシック認証が必要な場合、プロキシサーバに接続するための認証されたユーザ。
** _proxy_password_ = 指定したユーザ名のパスワード。
** _ca_cert_dir_= 追加の TLS CA 証明書バンドルを含む Data Sense Linux システム上のパス。プロキシが TLS 代行受信を実行している場合にのみ必要です。




Cloud Data Sense インストーラは、パッケージのインストール、 Docker のインストール、インストールの登録、および Data Sense のインストールを行います。インストールには 10~20 分かかります。

ホストマシンとコネクタインスタンスの間にポート8080を介した接続がある場合、インストールの進行状況はBlueXPのData Senseタブに表示されます。

設定ページで、スキャンするデータソースを選択できます。

また可能です link:task-licensing-datasense.html["クラウドデータセンスのライセンスをセットアップする"] 現時点では、データ量が 1TB を超えるまでは料金は発生しません。



=== 既存の環境にスキャナノードを追加する

データソースのスキャンに必要なスキャン処理能力が増えた場合は、スキャナノードを追加することができます。マネージャノードをインストールした直後にスキャナノードを追加することも、後でスキャナノードを追加することもできます。たとえば、1つのデータソースのデータ量が6カ月後に2倍または3倍になったことがわかった場合は、データスキャンに役立つ新しいスキャナノードを追加できます。

スキャナノードを追加するには、次の2つの方法があります。

* すべてのデータソースのスキャンに使用するノードを追加します
* 特定のデータソース、または特定のデータソースのグループのスキャンに使用するノードを追加します


デフォルトでは、追加した新しいスキャナノードはすべて、スキャンリソースの一般的なプールに追加されます。これを「デフォルトスキャナグループ」と呼びます。次の図では、6つすべてのデータソースからすべてのデータをスキャンする「デフォルト」グループに、1つのManagerノードと3つのスキャナノードがあります。

image:diagram_onprem_scanner_groups_default.png["デフォルトのスキャナグループに含まれている場合、データセンススキャナがデータソースをスキャンする方法を示す図。"]

スキャナノードがデータソースに物理的に近いデータソースでスキャンするデータソースがある場合は、スキャナノードまたはスキャナノードのグループを定義して、特定のデータソースまたはデータソースのグループをスキャンできます。次の図では、1つのマネージャーノードと3つのスキャナーノードがあります。

* Managerノードは「デフォルト」グループにあり、1つのデータソースをスキャンしています
* スキャナノード1は「United States」グループに属し、2つのデータソースをスキャンしています
* スキャナノード2および3は「ヨーロッパ」グループに属し、3つのデータソースのスキャンタスクを共有します


image:diagram_onprem_scanner_groups.png["異なるスキャナグループに割り当てられたときにデータセンススキャナがデータソースをスキャンする方法を示す図。"]

データセンススキャナグループは、データが保存されている別々の地域として定義できます。世界中に複数のData Senseスキャナノードを導入して、各ノードのスキャナグループを選択できます。このようにすると、各スキャナノードは最も近いデータをスキャンします。スキャナノードがデータに近いほど、データのスキャン時のネットワークレイテンシができるだけ低減されるため、データの読み取り速度が向上します。

データセンスに追加するスキャナグループを選択し、名前を選択できます。データセンスでは、「Europe」という名前のスキャナグループにマッピングされたノードはヨーロッパに導入されません。

追加のデータセンススキャナノードをインストールするには、次の手順に従います。

. スキャナノードとして機能するLinuxホストシステムを準備します
. これらのLinuxシステムにデータセンスソフトウェアをダウンロードします
. Managerノードでコマンドを実行して、スキャナノードを特定します
. 以下の手順に従って、スキャナノードにソフトウェアを展開します（また、各スキャナノードに対してオプションで「スキャナグループ」を定義します）。
. スキャナグループを定義した場合は、Managerノードで次の手順を実行します。
+
.. 「Working _environment To _ scanner _group_config.yml」ファイルを開き、各スキャナグループでスキャンされる作業環境を定義します
.. 次のスクリプトを実行して、このマッピング情報をすべてのスキャナノードに登録します。"update_we _scanner_group_from_config_file.sh "




.必要なもの
* スキャナノードのすべてのLinuxシステムがを満たしていることを確認します  the Linux host system,ホストの要件。
* （オプション）システムに、前提条件となる 2 つのソフトウェアパッケージ（ Docker Engine と Python 3 ）がインストールされていることを確認します。このソフトウェアがシステムにインストールされていない場合は、インストーラによってインストールされます。
* Linux システムに対する root 権限があることを確認してください。
* 環境が要件を満たしていることを確認します  BlueXP and Data Sense prerequisites,権限と接続。
* 追加するスキャナノードホストのIPアドレスを確認しておく必要があります。
* Data Sense ManagerノードホストシステムのIPアドレスが必要です
* コネクタシステムのIPアドレスまたはホスト名、ネットアップアカウントID、コネクタクライアントID、およびユーザアクセストークンが必要です。この情報を取得するには、次の_前提条件ステップ_を参照してください。
* アカウントの各データソースについて、_作業環境ID_を確認しておく必要があります。ご要望については、ng-contact-data-sense@netapp.comまでお問い合わせください。
* すべてのホストで次のポートとプロトコルを有効にする必要があります。
+
[cols="15,20,55"]
|===
| ポート | プロトコル | 説明 


| 2377 | TCP | クラスタ管理通信 


| 7946 | tcp 、 udp です | ノード間通信 


| 4789 | UDP | オーバーレイネットワークトラフィック 


| 50 | ESP | 暗号化された IPsec オーバーレイネットワーク（ ESP ）トラフィック 


| 111 | tcp 、 udp です | ホスト間でファイルを共有するための NFS サーバ（各スキャナノードからマネージャノードに必要） 


| 2049 | tcp 、 udp です | ホスト間でファイルを共有するための NFS サーバ（各スキャナノードからマネージャノードに必要） 
|===


次の手順に従って、スキャナノードの追加に必要なネットアップアカウントID、コネクタクライアントID、コネクタサーバ名、およびユーザアクセストークンを取得します。

. BlueXPのメニューバーで、*アカウント>アカウントの管理*をクリックします。
+
image:screenshot_account_id.png["BlueXPアカウントの詳細のスクリーンショット。"]

. _アカウントID_をコピーします。
. BlueXPメニューバーで、[ヘルプ]>[サポート]>[ BlueXPコネクタ*]をクリックします。
+
image:screenshot_connector_client_id.png["BlueXP Connectorの構成設定のスクリーンショット"]

. Connector_Client ID_と_サーバ名_をコピーします。
. にアクセスします https://services.cloud.netapp.com/developer-hub["APIドキュメント開発者ハブ"^] [*Learn how to authenticate*(認証方法を確認する)]をクリック
+
image:screenshot_client_access_token.png["APIドキュメントページのスクリーンショット。認証手順へのリンクが表示されています。"]

. 認証手順に従い、応答から_accessトークン_をコピーします。


.手順
. Data Sense Managerノードで、スクリプト「add_scanner_node.sh」を実行します。たとえば、次のコマンドはスキャナノードを2つ追加します。
+
`sudo ./add_scanner_node.sh -a <account_id> -c <client_id> -m <cm_host> -h <ds_manager_ip> *-n <node_private_ip_1,node_private_ip_2>* -t <user_token>`

+
変数値：

+
** _account_id _ = ネットアップアカウント ID
** _client_id_=コネクタクライアントID
** _cm_host_=コネクタシステムのIPアドレスまたはホスト名
** _ds_manager_ip_= Data Sense ManagerノードシステムのプライベートIPアドレス
** _Node_private_IP_= Data Sense ScannerノードシステムのIPアドレス（複数のスキャナノードのIPはカンマで区切ります）
** _user_token_= JWTユーザーアクセストークン


. add_scanner_nodeスクリプトが完了する前に、スキャナノードに必要なインストールコマンドを示すダイアログが表示されます。コマンドをコピーし、テキストファイルに保存します。例：
+
`sudo ./node_install.sh -m 10.11.12.13 -t ABCDEF1s35212 -u red95467j`

. 各 * スキャナノードホストで：
+
.. データセンスインストーラファイル(*DATASENSE-installer -<version> .tar.gz*)をホストマシンにコピーします(scpなどの方法を使用)。
.. インストーラファイルを解凍します。
.. 手順2でコピーしたコマンドを貼り付けて実行します。
.. スキャナノードを「スキャナグループ」に追加する場合は、パラメータ*-r <scanner_group_name>*をコマンドに追加します。それ以外の場合は、スキャナノードが「デフォルト」グループに追加されます。
+
すべてのスキャナノードでインストールが完了し、それらのノードがマネージャノードに参加したら、「add_scanner_node.sh」スクリプトも終了します。インストールには10~20分かかることがあります。



. スキャナグループにスキャナノードを追加した場合は、マネージャノードに戻り、次の2つのタスクを実行します。
+
.. 「/opt/netapp/Datasense/working _environment_To-scanner _group_config.yml」ファイルを開き、スキャナグループが特定の作業環境をスキャンするためのマッピングを入力します。各データソースの_作業環境ID_をネットアップから取得する必要があります（Eメール：ng-contact-data-sense@netapp.com）。たとえば、次のエントリは、2つの作業環境を2つのスキャナグループに追加します。
+
....
scanner group:
 europe:
   - "working_environment_id1"
   - "working_environment_id2"
 united_states:
   - "working_environment_id3"
   - "working_environment_id4"
....
+
リストに追加されていない作業環境は、「デフォルト」グループによってスキャンされます。「デフォルト」グループには、少なくとも1つのマネージャまたはスキャナノードが必要です。

.. 次のスクリプトを実行して、このマッピング情報をすべてのスキャナノードに登録します。
`/opt/netapp/Datasense/tools/update_we_scanner_group_from_config_file.sh`




データセンスは、ManagerノードとScannerノードで設定され、すべてのデータソースをスキャンします。

設定ページで、スキャンするデータソースを選択できます（まだ選択していない場合）。スキャナグループを作成した場合は、各データソースがそれぞれのグループのスキャナノードによってスキャンされます。

また可能です link:task-licensing-datasense.html["クラウドデータセンスのライセンスをセットアップする"] 現時点では、データ量が 1TB を超えるまでは料金は発生しません。



=== 大規模構成向けのマルチホストインストール

ペタバイト規模のデータをスキャンする大規模な構成では、複数のホストを含めて処理能力を追加できます。複数のホストシステムを使用する場合、プライマリシステムは _Managernode_name と呼ばれ、追加の処理能力を提供する追加システムは _Scanner Node_と 呼ばれます。

複数のオンプレミスホストに Data Sense ソフトウェアをインストールする場合は、次の手順を実行します。

.必要なもの
* Manager ノードと Scanner ノードのすべての Linux システムが、を満たしていることを確認します  the Linux host system,ホストの要件。
* （オプション）システムに、前提条件となる 2 つのソフトウェアパッケージ（ Docker Engine と Python 3 ）がインストールされていることを確認します。このソフトウェアがシステムにインストールされていない場合は、インストーラによってインストールされます。
* Linux システムに対する root 権限があることを確認してください。
* 環境が要件を満たしていることを確認します  BlueXP and Data Sense prerequisites,権限と接続。
* 使用するスキャナノードホストの IP アドレスを確認しておく必要があります。
* すべてのホストで次のポートとプロトコルを有効にする必要があります。
+
[cols="15,20,55"]
|===
| ポート | プロトコル | 説明 


| 2377 | TCP | クラスタ管理通信 


| 7946 | tcp 、 udp です | ノード間通信 


| 4789 | UDP | オーバーレイネットワークトラフィック 


| 50 | ESP | 暗号化された IPsec オーバーレイネットワーク（ ESP ）トラフィック 


| 111 | tcp 、 udp です | ホスト間でファイルを共有するための NFS サーバ（各スキャナノードからマネージャノードに必要） 


| 2049 | tcp 、 udp です | ホスト間でファイルを共有するための NFS サーバ（各スキャナノードからマネージャノードに必要） 
|===


.手順
. の手順 1~7 を実行します  installation for typical configurations,シングルホストインストール マネージャーノード。
. 手順 8 で示したように、インストーラからプロンプトが表示されたら、一連のプロンプトに必要な値を入力するか、必要なパラメータをコマンドライン引数としてインストーラに指定することができます。
+
シングルホストのインストールで使用できる変数に加えて、新しいオプション * -n <Node_IP> * を使用してスキャナノードの IP アドレスを指定します。複数のスキャナノードの IP はカンマで区切って指定します。

+
たとえば、次のコマンドは 3 つのスキャナノードを追加します。 'sudo ./install.sh -a <account_id>-c <agent_id>-t <token> --host <ds_host> --manager-host <cm_host> * -n <node-ip1> 、 <node-ip2> 、 <node-ip3>*-proxy-proxy-proxy-host-pproxy-pxe-password</password>

. マネージャノードのインストールが完了する前に、スキャナノードに必要なインストールコマンドがダイアログに表示されます。コマンドをコピーし、テキストファイルに保存します。例：
+
sudo ./node_install.sh -m 10.11.12.13-t ふぁいる EF-1u69m1-1s35212`

. 各 * スキャナノードホストで：
+
.. データセンスインストーラファイル(*DATASENSE-installer -<version> .tar.gz*)をホストマシンにコピーします(scpなどの方法を使用)。
.. インストーラファイルを解凍します。
.. 手順 3 でコピーしたコマンドを貼り付けて実行します。
+
すべてのスキャナノードでインストールが完了し、それらのノードがマネージャノードに参加したら、マネージャノードのインストールも完了します。





Cloud Data Sense インストーラがパッケージ、 Docker のインストールを完了し、インストールを登録します。インストールには 10~20 分かかります。

設定ページで、スキャンするデータソースを選択できます。

また可能です link:task-licensing-datasense.html["クラウドデータセンスのライセンスをセットアップする"] 現時点では、データ量が 1TB を超えるまでは料金は発生しません。
